<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grand Jeu Chandeleur - Ambiance & Styles</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
</head>
<body>

<div class="game-card">
    <!-- HEADER -->
    <div class="card-header">
        <div class="brand-container">
            <div class="logo-main">Ambiance <span class="amp">&</span> Styles</div>
            <div class="logo-slogan">Ensemble pour de bons moments</div>
        </div>
        <div class="progress-container">
            <div class="progress-fill" id="progressBar"></div>
        </div>
    </div>

    <!-- √âTAPE 1 : MENU PRINCIPAL -->
    <div class="step-container active" id="step-1">
        <h1>Le Grand Parcours Chandeleur</h1>
        <p class="subtitle">Compl√©tez les 3 d√©fis pour d√©couvrir votre profil<br>et tenter de gagner une cr√™pi√®re MASTRAD&nbsp;!</p>

        <div class="triangle-container">
            <svg class="triangle-svg" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
                <path d="M 30 50 L 270 50 L 150 250 Z" />
            </svg>

            <div class="node node-1 unlocked" data-game="1" onclick="launchLevel(1)">
                <div class="node-ring"></div>
                <img src="images/IMAGE_SELECT_MEMORY.png" class="node-img" alt="Jeu 1">
            </div>

            <div class="node node-2 locked" data-game="2" onclick="launchLevel(2)">
                <div class="node-ring"></div>
                <img src="images/SALADE_DE_LETTRE.jpg" class="node-img" alt="Jeu 2">
                <div class="node-lock">üîí</div>
            </div>

            <div class="node node-3 locked" data-game="3" onclick="launchLevel(3)">
                <div class="node-ring"></div>
                <img src="images/QUIZZ.png" class="node-img" alt="Jeu 3">
                <div class="node-lock">üîí</div>
            </div>

            <button class="center-node locked" id="centerGiftBtn" onclick="launchFinalForm()" disabled>
                <span class="gift-icon">üéÅ</span>
            </button>
        </div>

        <p class="instruction-text">Cliquez sur un d√©fi pour commencer</p>
    </div>

    <!-- √âTAPE 2 : JEU MEMORY -->
    <div class="step-container" id="step-2">
        <button class="btn-back" onclick="backToMenu()">‚Üê Retour</button>
        <div class="step-indicator">Jeu 1/3</div>
        <h2>Memory des Cr√™pes</h2>
        <p>Retrouvez les paires d'ingr√©dients !</p>
        <div class="memory-grid" id="memoryGrid"></div>
    </div>

    <!-- √âTAPE 3 : JEU DES MOTS -->
    <div class="step-container" id="step-wordgame">
        <button class="btn-back" onclick="backToMenu()">‚Üê Retour</button>
        <div class="step-indicator">Jeu 2/3</div>
        <h2 id="wordGameTitle">Trouvez le mot myst√®re</h2>
        <p id="wordGameHint" class="hint-text"></p>
        <div id="hintTimer" class="hint-timer">Indice dans <span id="timerSeconds">10</span>s</div>
        <div class="answer-display" id="user-answer"></div>
        <div class="word-container" id="scrambled-word"></div>
        <div class="word-buttons">
            <button class="btn-main" onclick="checkWord()">Valider</button>
            <button class="btn-secondary" onclick="resetWord()">Recommencer</button>
        </div>
    </div>

    <!-- √âTAPE 4 : QUIZ -->
    <div class="step-container" id="step-3">
        <button class="btn-back" onclick="backToMenu()">‚Üê Retour</button>
        <div class="step-indicator" id="questionIndicateur">Question 1/6</div>
        <img id="questionImage" src="" alt="" class="question-image">
        <h2 id="questionText">Question...</h2>
        <div id="optionsContainer"></div>
    </div>

    <!-- √âTAPE 5 : FORMULAIRE -->
    <!-- √âTAPE 5 : FORMULAIRE -->
<div class="step-container" id="step-4">
    <div class="success-icon">üéâ</div>
    <h1>F√©licitations !</h1>
    <p>Renseignez vos informations pour d√©couvrir votre profil Chandeleur et participer au tirage au sort.</p>

    <form onsubmit="submitForm(event)" class="form-container">
        <input type="text" class="input-field" placeholder="Pr√©nom *" required id="prenom">
        <input type="text" class="input-field" placeholder="Nom *" required id="nom">
        <input type="email" class="input-field" placeholder="Email *" required id="email">

        <select class="input-field" required id="magasin">
            <option value="" disabled selected>S√©lectionnez votre magasin *</option>
            <option>SOISSONS</option>
                <option>VICHY</option>
                <option>GAP</option>
                <option>ANTIBES</option>
                <option>RODEZ</option>
                <option>VILLEFRANCHE DE ROUERGUE</option>
                <option>LISIEUX</option>
                <option>HONFLEUR</option>
                <option>AURILLAC</option>
                <option>SAINTES</option>
                <option>VAUX SUR MER</option>
                <option>BRIVE</option>
                <option>USSEL</option>
                <option>SARROLA CARCOPINO</option>
                <option>BIGUGLIA</option>
                <option>SAINT BRIEUC CEDEX 2</option>
                <option>DINAN</option>
                <option>ST QUAY PERROS</option>
                <option>BOULAZAC ISLE MANOIRE (PERIGUEUX)</option>
                <option>CHALEZEULE</option>
                <option>PONTARLIER</option>
                <option>GISORS</option>
                <option>GUICHAINVILLE</option>
                <option>Saint Marcel</option>
                <option>SAINT DENIS LES PONTS</option>
                <option>QUIMPER</option>
                <option>SAINT MARTIN DES CHAMPS</option>
                <option>LANDERNEAU</option>
                <option>NIMES</option>
                <option>ROUFFIAC-TOLOSAN</option>
                <option>ARCACHON</option>
                <option>FOUGERES</option>
                <option>ST MALO</option>
                <option>PLECHATEL (Bain de Bretagne)</option>
                <option>VITRE</option>
                <option>ST GREGOIRE</option>
                <option>SALAISE SUR SANNE</option>
                <option>ST PAUL LES DAX</option>
                <option>BLOIS</option>
                <option>ROMORANTIN LANTHENAY</option>
                <option>FEURS</option>
                <option>ROANNE</option>
                <option>MONTBRISON</option>
                <option>ANCENIS ST GEREON</option>
                <option>PORNIC</option>
                <option>GUERANDE</option>
                <option>REZE</option>
                <option>AMILLY (MONTARGIS)</option>
                <option>CAHORS</option>
                <option>MENDE</option>
                <option>CHOLET Cedex</option>
                <option>SAUMUR</option>
                <option>COUTANCES</option>
                <option>SAINT MARTIN DES CHAMPS (AVRANCHES)</option>
                <option>CHALONS EN CHAMPAGNE</option>
                <option>CORMONTREUIL</option>
                <option>LAVAL</option>
                <option>BEAUVAIS</option>
                <option>URRUGNE</option>
                <option>CABESTANY</option>
                <option>STRASBOURG</option>
                <option>SAVERNE</option>
                <option>DORLISHEIM Cedex</option>
                <option>HAGUENAU</option>
                <option>REICHSTETT</option>
                <option>SELESTAT</option>
                <option>CERNAY</option>
                <option>BLOTZHEIM</option>
                <option>TASSIN LA DEMI LUNE</option>
                <option>VESOUL</option>
                <option>CHALON SUR SAONE</option>
                <option>CRECHES SUR SAONE</option>
                <option>GRESY SUR AIX</option>
                <option>GILLY SUR ISERE</option>
                <option>NIORT</option>
                <option>AMIENS</option>
                <option>MONTAUBAN</option>
                <option>PUGET SUR ARGENS  (FREJUS)</option>
                <option>ORANGE</option>
                <option>CHALLANS</option>
                <option>POITIERS</option>
                <option>LIMOGES</option>
                <option>NEUFCHATEAU</option>
                <option>BELFORT</option>
        </select>

        <!-- ‚≠ê NOUVELLES CHECKBOXES OBLIGATOIRES -->
        <label class="checkbox-label">
            <input type="checkbox" required class="checkbox-input" id="accept_reglement">
            <span>Oui, j'ai pris connaissance du <a href="/shared/reglement.html" target="_blank" style="color: #e63946; text-decoration: underline;">r√®glement</a> et je participe *</span>
        </label>

        <label class="checkbox-label">
            <input type="checkbox" required class="checkbox-input" id="accept_rgpd">
            <span>J'accepte que mes donn√©es √† caract√®re personnel soient collect√©es pour participer au jeu *</span>
        </label>

        <label class="checkbox-label">
            <input type="checkbox" class="checkbox-input" id="opt_in">
            <span>J'accepte de recevoir des communications personnalis√©es d'Ambiance & Styles</span>
        </label>

        <button type="submit" class="btn-main">D√©couvrir mon profil</button>

        <!-- ‚≠ê TEXTE RGPD EN BAS -->
        <p style="font-size: 11px; color: #666; margin-top: 20px; line-height: 1.4;">
            Conform√©ment √† la r√©glementation en vigueur sur la protection des donn√©es personnelles, vous disposez de plusieurs droits, notamment l'acc√®s, la rectification, la limitation, la portabilit√© (lorsque cela est possible) et la suppression des donn√©es vous concernant.<br>
            Pour exercer tout droit concernant vos donn√©es personnelles, contactez-nous √† l'adresse <a href="mailto:info@ekfrance.fr" style="color: #e63946;">info@ekfrance.fr</a>.<br>
            Pour plus d'informations, vous pouvez consulter notre <a href="https://ambianceetstyles.com/page/protection-des-donnees" target="_blank" style="color: #e63946;">Politique de Confidentialit√©</a>.
        </p>
    </form>
</div>


    <!-- √âTAPE 6 : R√âSULTATS -->
    <div class="step-container" id="step-5">
        <div class="success-icon">üéÅ</div>
        <h1 id="resultTitle">Votre Profil</h1>
        <p id="resultDescription">Description du profil...</p>
        <div id="produitsContainer"></div>
        <button class="btn-main" onclick="resetGame()" style="margin-top: 25px;">Rejouer</button>
        <p class="subtitle" style="margin-top: 30px;">
            ‚ú® C'est dans la poche !  
            Votre participation au tirage au sort est bien enregistr√©e.  
            Vous avez une chance de remporter une cr√™pi√®re MASTRAD !<br>
        
        </p>
    </div>

    <!-- MODAL NOTIFICATION CUSTOM -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-box">
            <div class="modal-icon" id="modalIcon">üéâ</div>
            <h3 class="modal-title" id="modalTitle">Bravo !</h3>
            <p class="modal-message" id="modalMessage">Message ici...</p>
            <button class="btn-modal" id="modalBtn" onclick="closeModal()">Continuer</button>
        </div>
    </div>

</div>

<!-- IMPORTANT : chargement ABSOLU (sinon /ambiance-styles/shared/... => 404) -->
<script src="config.js"></script>
<script src="/shared/js/api.js"></script>

<script src="script.js"></script>
</body>
</html>
